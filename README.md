## Part 1. Настройка gitlab-runner

**Подняла виртуальную машину Ubuntu Server 22.04 LTS.**

![1](screen/1.jpeg)

**Скачала и установила на виртуальную машину gitlab-runner**

![3](screen/3.jpeg)

**Запустила gitlab-runner и зарегистрировала его для использования в текущем проекте (DO6_CICD)**

![2](screen/2.jpeg)


**Перезапустила и убедилась, что сервис активен**

![4](screen/4.jpeg)

## Part 2. Сборка

**Скачивание дополнительных утилит**

![7](screen/7.jpeg)

**В файле gitlab-ci.yml добавила этап запуска сборки через мейк файл из проекта C2`**

![6](screen/6.jpeg)

**Запушила изменения и проверила пайплайн**

![5](screen/5.jpeg)

## Part 3. Тест кодстайла


**Написала этап для CI, который запускает скрипт кодстайла (clang-format)**

![10](screen/p2%203.jpeg)

**Пример удачной сборки**

![8](screen/p2%201.jpeg)

![11](screen/p2%205.jpeg)


**Пример неудачной сборки - Если кодстайл не прошел, то «зафейлен» пайплайн**

![9](screen/p2%202.jpeg)


![12](screen/p2%204.jpeg)


## Part 4. Интеграционные тесты

**Написала этап для CI, который запустит интеграционные тесты**

![13](screen/p3%201.jpeg)

**Если тесты не прошли, то пайплайн «фейлится»:**

![14](screen/p3%202.jpeg)

![16](screen/p3%205.jpeg)


**Пример успешного прохода тестов**

![15](screen/p3%203.jpeg)


![17](screen/p3%204.jpeg)


## Part 5. Этап деплоя


**Задала машинам статические ip адреса и прописала маршруты для их связи**

![19](screen/p4%202.jpeg)


![20](screen/p4%203.jpeg)

**Для целей выполнения задания нужно, чтобы раннер с первой ВМ получал беспарольный доступ на вторую ВМ. Для этого на первой ВМ нужно зайти в пользователя раннера(gitlab-runner) и сгенерировать от его лица ssh-ключ, после чего перенести его на вторую ВМ**

![18](screen/p4%201.jpeg)


**Написала bash-скрипт, который при помощи ssh и scp копирует файлы, полученные после сборки (артефакты), в директорию /usr/local/bin второй виртуальной машины**

![21](screen/p4%204.jpeg)

**Дополнила файл .gitlab-ci.yml следующими строками**

![22](screen/p4%205.jpeg)


**Проверка, что есть запуск вручную и успешное прохождение этапа**

![26](screen/p4%206.jpeg)

**В результате получаю готовые к работе приложения из проекта C2**

![23](screen/p4%207.jpeg)

## Part 6. Дополнительно. Уведомления

**Создаю новый бот через @BotFather, после чего получаю id токена**

![24](screen/p6%201.jpeg)


**Через @userinfobot узнаем  id своего чата:**

![25](screen/p6%202.jpeg)


**Создала файл скрипта и дала ему права на исполнение chmod +x bot.sh**

![27](screen/p6%203.jpeg)


**Дополняю файл gitlab-ci.yml**

![28](screen/p6%204.jpeg)

**Проверка через docker images, что все собралось корректно командой`sudo docker images`**

![29](screen/p6%205.jpeg)

**Успешное прохождение пайплайна и получение уведомлений через бота**

![31](screen/p6%207.jpeg)











